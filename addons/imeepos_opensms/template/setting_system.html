{template 'common/header'}
{template 'navs'}
<div class="panel panel-default" id="app" ng-controller="rootCtrl">
    <div class="panel-heading">
        基础设置
    </div>
    <div class="panel-body">
        <form action="" method="post"  class="form-horizontal" enctype="multipart/form-data">
            <div class="form-group">
                <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">短信接口</label>
                <div class="col-sm-8 col-lg-9 col-xs-12">
                    <label class="radio-inline">
                        <input type="radio" ng-model="item.type" value="0" {if $item['type']==0}checked="checked"{/if}> 微赞短信
                    </label>
                    <label class="radio-inline">
                        <input type="radio" ng-model="item.type" value="1" {if $item['type']==1}checked="checked"{/if}> 阿里大鱼
                    </label>
                    <label class="radio-inline">
                        <input type="radio" ng-model="item.type" value="3" {if $item['type']==3}checked="checked"{/if}> 阿里大鱼语音验证码
                    </label>
                    <label class="radio-inline">
                        <input type="radio" ng-model="item.type" value="2" {if $item['type']==2}checked="checked"{/if}> 聚合短信
                    </label>
                    <span class="help-block"></span>
                </div>
            </div>
            <div id="type_0" ng-if="item.type == 0">
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">模板内容</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <input type="text" ng-model="item.content_tpl" placeholder="" class="form-control"/>
                        <span class="help-block">例：尊敬的：#nickname#,恭喜您！您的验证码是#code#，请注意查收！</span>
                    </div>
                </div>
            </div>
            <div ng-if="item.type == 1">
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">阿里大鱼appkey</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <input type="text" ng-model="item.appkey" placeholder="" class="form-control"/>
                        <span class="help-block"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">阿里大鱼appsecret</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <input type="text" ng-model="item.appsecret" placeholder="" class="form-control"/>
                        <span class="help-block"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">阿里大鱼身份验证签名</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <input type="text" ng-model="item.signname" placeholder="" class="form-control"/>
                        <span class="help-block"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">验证码模板ID</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <input type="text" ng-model="item.code_tpl" placeholder="" class="form-control"/>
                        <span class="help-block">【签名】尊敬的：${nickname},恭喜您！您的验证码是${code}，请注意查收！</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">模板变量修改</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <div class="input-group">
                            <span class="input-group-addon">nickname</span>
                            <input type="text" class="form-control" ng-model="item.nickname_title">
                            <span class="input-group-addon">code</span>
                            <input type="text" class="form-control" ng-model="item.code_title">
                            <span class="input-group-addon">product</span>
                            <input type="text" class="form-control" ng-model="item.product_title">
                            <span class="input-group-addon">product的值</span>
                            <input type="text" class="form-control" ng-model="item.product_value">
                        </div>
                        <span class="help-block">为空表示没有，用于当变量名称与阿里大鱼不一致时使用！</span>
                    </div>
                </div>
            </div>

            <div id="type_2" ng-if="item.type == 2">
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">APPKEY</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <input type="text" ng-model="item.appkey" placeholder="" class="form-control"/>
                        <span class="help-block"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">验证码模板ID</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <input type="text" ng-model="item.code_tpl" placeholder="" class="form-control"/>
                        <span class="help-block">【签名】尊敬的：#nickname#,恭喜您！您的验证码是#code#，请注意查收！</span>
                    </div>
                </div>
            </div>

            <div ng-if="item.type == 3">
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">阿里大鱼appkey</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <input type="text" ng-model="item.appkey" placeholder="" class="form-control"/>
                        <span class="help-block"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">阿里大鱼appsecret</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <input type="text" ng-model="item.appsecret" placeholder="" class="form-control"/>
                        <span class="help-block"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">阿里大鱼身份验证签名</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <input type="text" ng-model="item.signname" placeholder="" class="form-control"/>
                        <span class="help-block"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">语音呼叫显示号码</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <input type="text" ng-model="item.calledShowNum" placeholder="" class="form-control"/>
                        <span class="help-block"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">语音模板ID</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <input type="text" ng-model="item.code_tpl" placeholder="" class="form-control"/>
                        <span class="help-block">【签名】尊敬的：${nickname},恭喜您！您的验证码是${code}，请注意查收！</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label">模板变量修改</label>
                    <div class="col-sm-8 col-lg-9 col-xs-12">
                        <div class="input-group">
                            <span class="input-group-addon">nickname</span>
                            <input type="text" class="form-control" ng-model="item.nickname_title">
                            <span class="input-group-addon">code</span>
                            <input type="text" class="form-control" ng-model="item.code_title">
                            <span class="input-group-addon">product</span>
                            <input type="text" class="form-control" ng-model="item.product_title">
                        </div>
                        <span class="help-block">为空表示没有，用于当变量名称与阿里大鱼不一致时使用！</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-offset-2 col-md-offset-2 col-lg-offset-1 col-xs-12 col-sm-10 col-md-10 col-lg-11">
                    <a href="javascript:;" ng-click="post()" class="btn btn-primary span3">提交</a>
                    <!--<a href="{php echo $this->createWebUrl('test')}" class="btn btn-default">测试短信</a>-->
                </div>
            </div>

        </form>
    </div>
</div>
<script>
    require(['angular','util'],function(angular,util){
        var app = angular.module('app',[]);
        app.controller("rootCtrl",function($scope){
            $scope.item = {php echo json_encode($item)};
            $scope.item = $scope.item || {};
            $scope.item.appkey = $scope.item.appkey || '';
            $scope.item.appid = $scope.item.appid || '';
            console.log($scope.item);
            $scope.post = function(){
                console.log($scope.item);
                $.post("",$scope.item,function(data){
                    util.message("保存成功","{php echo $this->createWebUrl('setting')}",'success');
                },'json');
            }
        });
        angular.bootstrap($('#app')[0],["app"]);
    });
</script>
{template 'common/footer'}