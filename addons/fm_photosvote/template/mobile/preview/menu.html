<link href="{FM_STATIC_PLUGIN}designer/imgsrc/menu.css" rel="stylesheet">{if empty($_W['angular_loaded'])}<script language="javascript" src="{FM_STATIC_PLUGIN}designer/js/dist/jquery.gcjs.js"></script><script type="text/javascript" src="{FM_STATIC_PLUGIN}designer/imgsrc/angular.min.js"></script>{/if}{if empty($_W['angular_loaded'])}<div ng-app="myApp">{/if}<div ng-controller="MenuCtrl">    <div class="designer-menu"  style='position: fixed;bottom:0px;' data-bgalpha="{{params.bgalpha}}" >        <ul>            <li ng-repeat="menu in menus"                ng-class="{'designer-menu-line':params.showicon==0 || params.showicon==1,'designer-menu-w1':menus.length == 1,                            'designer-menu-w2':menus.length == 2,'designer-menu-w3':menus.length == 3,'designer-menu-w4':menus.length == 4,                            'designer-menu-w5':menus.length == 5,'designer-menu-border': params.showborder==1,'designer-menu-noborder': params.showborder!=1}"                ng-style="{'border-top-color': menu.bordercolor}"                ng-click="openMenu(menu,$event)"                >             <div class="designer-menu-bg" ng-style="{'background':menu.bgcolor,'opacity':params.bgalpha}"></div>              <div class="designer-menu-item" ng-style="{'color':menu.textcolor}" >                    <span ng-class="{'designer-menu-block':params.showicon==2,'designer-menu-icon':params.showicon==2}"><i class="{{menu.icon}} "  ng-style="{color:menu.iconcolor}" ng-show="params.showicon!=0"></i></span>                    <span class='designer-menu-label' ng-class="{'designer-menu-block':params.showicon==2,'designer-menu-text':params.showicon==2}"  ng-show="params.showtext==1"> {{menu.title}}</span>              </div>               <div class="sub" ng-style="{'border-color':params.bordercolor2,'background':params.bgcolor2}">                    <span>                        <a                            class="designer-menu-link"                            ng-repeat="sub in menu.subMenus"                            ng-style="{'border-bottom-color':params.bordercolor2,'color':params.textcolor2}"                            href="{{sub.url}}">{{sub.title}}</a>                    </span>                    <div class="corner"  ng-style="{'border-top-color':params.bordercolor2}"></div>                    <div class="corner2"  ng-style="{'border-top-color':params.bgcolor2}"></div>                </div>                <div class="designer-menu-spliter"  ng-show="params.showborder==1" ng-style="{'background':menu.bordercolor}"></div>              </li>        </ul>    </div></div>{if empty($_W['angular_loaded'])}</div>{/if}<script type="text/javascript">    var angular_loaded = "{$_W['angular_loaded']}";    if (angular_loaded == '' || angular_loaded == null) {        var app = angular.module('myApp', []);    }    app.controller('MenuCtrl', ['$scope', function($scope){            $scope.menus = {php echo !empty($this->GetFooter($rbasic['menuid'])['menus'])?$this->GetFooter($rbasic['menuid'])['menus']:json_encode($menus)};            $scope.params = {php echo !empty($this->GetFooter($rbasic['menuid'])['params'])?$this->GetFooter($rbasic['menuid'])['params']:json_encode($params)};            //console.log($scope);            $scope.clear =function(m){                 angular.forEach($scope.menus, function(m,index) {                    m.textcolor  = $scope.params.textcolor;                    m.bgcolor  =$scope.params.bgcolor;                    m.iconcolor  = $scope.params.iconcolor;                    m.bordercolor  = $scope.params.bordercolor;                 });            }            $scope.clear();            $scope.openMenu = function(menu,event){                 if(menu.subMenus.length<=0){                        if(menu.url==''){                            return;                        }                        if(menu.url=='search'){                        		//alert('search');                        		$('.searchfix').show();                            return;                        }                        location.href = menu.url;                         return;                    }                    var current = $(event.currentTarget).closest('li').find('.sub');                    var h = current.height();                    $scope.clear();                    var bgalpha = $scope.params.bgalpha ;                    if( !$.isNumber(bgalpha) || parseFloat(bgalpha )>1){                        bgalpha = 1;                    }                     if(bgalpha!=1){                              //有透明度                            if(parseInt(current.css('opacity'))>=1){ //弹出后隐藏                                    current.animate({opacity:0,bottom:-h-50},200);                            } else{                                current.css('bottom',50).animate({opacity:1},200);                                 menu.textcolor  = $scope.params.textcolorhigh;                                 menu.bgcolor  = $scope.params.bgcolorhigh;                                 menu.iconcolor  = $scope.params.iconcolorhigh;                                 menu.bordercolor  = $scope.params.bordercolorhigh;                            }                        $(event.currentTarget).siblings().closest('li').find('.sub').each(function(){                            var h = $(this).height();                            $(this).animate({opacity:0},200);                        });                     }                     else{                           if(parseInt(current.css('bottom'))>0){                                current.animate({bottom:-h-50,opacity:0},200);                           } else{                                current.animate({bottom:50,opacity:1},200);                                menu.textcolor  = $scope.params.textcolorhigh;                                menu.bgcolor  = $scope.params.bgcolorhigh;                                menu.iconcolor  = $scope.params.iconcolorhigh;                                menu.bordercolor  = $scope.params.bordercolorhigh;                           }                               $(event.currentTarget).siblings().closest('li').find('.sub').each(function(){                           var h = $(this).height();                          $(this).animate({bottom:-h-50,opacity:0},200);                    });                     }            }    }]);$(function(){	window.setTimeout("setHeight()", 1000);})window.setHeight = function() {	var len =$('.designer-menu .sub').length;    $('.designer-menu .sub').each(function(i){         var h = $(this).height();         var w = $(this).closest('li').width();         $(this).css('bottom',  -(h+50));         var left = parseFloat( $(this).offset().left.toString().replace('px',''));         if(i==0){         	if(left<0){         		left =Math.abs(left);         		$(this).offset({left:5});         		var corner = $(this).find('.corner');         		var cornerleft = ( parseFloat( $(this).css('left').replace('px','')) - left  ) /2 + 5;         		corner.css('left',cornerleft);         	    $(this).find('.corner2').css('left',cornerleft);         	}        }else if(i+1==len){        	var right = $(this).width() + left;         	if(right>=$(document).width()){         		var newoffset = $(document).width() - $(this).width() - 5;         	    $(this).offset({left:newoffset});         	    var corner = $(this).find('.corner');         	    var cornerleft= ($(this).width() - $(this).closest('li').width()) / 2 + $(this).width()/2 + 5;         		corner.css('left',cornerleft);         	    $(this).find('.corner2').css('left',cornerleft);         	}        }    })}</script><style>     .searchfix {      height: 80px;      width: 100%;      background: {if empty($rbody_photosvote['topbgsocolor'])}#7A319E{else}{$rbody_photosvote['topbgsocolor']}{/if};      position: fixed;      top: 0;      left: 0;      z-index: 20000001;      display: none;    }    .searchfix .inputbg {    		background-color: {if empty($rbody_photosvote['topbgsoinputcolor'])}#a57474{else}{$rbody_photosvote['topbgsoinputcolor']}{/if};    		border: 1px solid {if empty($rbody_photosvote['topbgsoinputcolor'])}#cccccc{else}{$rbody_photosvote['topbgsoinputcolor']}{/if};    		color: {if empty($rbody_photosvote['topbgsoinputtextcolor'])}#fff{else}{$rbody_photosvote['topbgsoinputtextcolor']}{/if};    }    .searchfix .btndef {    		color: {if empty($rbody_photosvote['topbgsoantextcolor'])}#333{else}{$rbody_photosvote['topbgsoantextcolor']}{/if};   	 	background-color: {if empty($rbody_photosvote['topbgsoancolor'])}#af8282{else}{$rbody_photosvote['topbgsoancolor']}{/if};    		border-color: {if empty($rbody_photosvote['topbgsoancolor'])}#e2b2b2{else}{$rbody_photosvote['topbgsoancolor']}{/if};    	}    .tip {      height: 40px;      line-height: initial;      color: {if empty($rbody_photosvote['topbgsodescolor'])}#fff{else}{$rbody_photosvote['topbgsodescolor']}{/if};      text-align: center;    }    .btns {      width: 19%;      float: right;      height: 30px;      line-height: 30px;      background-size: 18px auto;      border-radius: 3px;      color: {if empty($rbody['bodytextcolor'])}#fff{else}{$rbody['bodytextcolor']}{/if};      padding-left: 20px;    }</style><div class="searchfix">      <div class="s_up">	      	<form action="index.php" method="get" class="form-horizontal">	      		<input type="hidden" name="i" value="{$uniacid}" />	      		<input type="hidden" name="c" value="entry" />	      		<input type="hidden" name="m" value="fm_photosvote" />	      		<input type="hidden" name="do" value="photosvote" />	      		<input type="hidden" name="rid" value="{$rid}" />					<div class="form-group">						<label class="col-xs-12 col-sm-2 col-md-2 col-lg-1 control-label"></label>						<div class="col-xs-12 col-sm-8 col-lg-7">							<div class="input-group">								<input type="text" name="keyword" placeholder="请输入您要查找的编号或姓名" class="form-control txt inputbg" id="txt" />								<span class="input-group-btn">									<button class="btn btn-default btndef" style="{if $templatename != 'default'}padding: 6px 8px;{else}padding: 9px 8px;{/if}margin: 0;"><i class="fa fa-search"></i> 搜索</button>								</span>						</div>						<div class="help-block"><p class="tip">搜索选手编号(ID)或姓名，为Ta投票吧！</p></div>					</div>        </form>      </div>    </div>  </div>