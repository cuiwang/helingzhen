{template 'common/header'}

<link rel="stylesheet" href="../addons/yzmhb_pzh/css/king-table.css"/>
<script type="text/javascript" src="../addons/yzmhb_pzh/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="../addons/yzmhb_pzh/js/king-table.js"></script>
<div class="main">
<form id="redSet" class="form form-horizontal" action="{php echo $this->createWebUrl('search')}" method="post">
 <div class="panel panel-default">
     <div class="panel-heading">
       现有口令查询
    </div>
     <div class="panel-body">
    <div class="form-group">
    <label class="col-xs-12 col-sm-3 col-md-2 text-center col-lg-1 control-label">创建日期范围:</label>
        <div class="col-sm-2">
            {php echo tpl_form_field_date('createBgTime', $createBgTime, true);}
        </div>
        <label class="col-xs-12 col-sm-3 col-md-1 text-center col-lg-1 control-label">至</label>
        <div class="col-sm-2">
            {php echo tpl_form_field_date('createEdTime', $createEdTime, true);}
        </div>
    </div>
    </div>

     <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 text-center col-md-2 control-label">口令类型:</label>
                    <div class="col-sm-2 col-xs-12">
                    <select  name="kind" class="form-control"  value="" >
                     
                        <option value="全部" class="form-control" <?php if($kind=='全部' ||$kind=='') echo 'selected'; ?> >全部</option>
                        
                    </select>
                       <!--  <input type="text" name="kind" value="<?php echo $kind ?>" class="form-control"> -->
                    </div>
                </div>
     </div>
     <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-2 control-label">查找口令(可不填)：</label>
                    <div class="col-sm-6 col-xs-12">
                       <input type="text" name="content" value="<?php echo $this->module['config']['kouling']['content']; ?>" class="form-control">
                       <span class="help-block">可以输入包含的关键字</span>
                    </div>
                </div>
        </div>

       <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-1 control-label"></label>
                     
                    <div class="col-md-2 col-lg-1" >
                        <input name="submit" type="submit" value="查询" class="btn btn-primary btn-block" />
                        
                        <input type="hidden" name="token" value="{$_W['token']}" />
                    </div>
                     <div class="col-md-2 col-lg-1" >
                      <input name="submit" type="submit" value="导出" class="btn btn-primary btn-block" />
                     </div>
                </div>
        </div>

</form> 
<div class="panel-body">
   <div class="form-group">
  
    <table id="cs_table" class="data-table"></table>
    </
    <br/>
      
    <table id="cs_table2" class="data-table"></table>
    
</div>
</div>
</div>
<form id="redSet" class="form form-horizontal" action="{php echo $this->createWebUrl('addkouling')}" method="post">
 <div class="panel panel-default">
     <div class="panel-heading">
       批量导入口令
    </div>
     
       <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-1 control-label"></label>
                     <div class="col-md-2 col-lg-1" >
                      <input name="submit" type="submit" value="导入" class="btn btn-primary btn-block" />
                     </div>
        </div>
            <script type="text/javascript">
   
    
            $("#massadd").click(function(){
               
                var num= $("#mskouling").val();
                var count = $("#mscount").val();
                var money = $("#msmoney").val();
                $.ajax({
                    type: "POST",
                    url: "{php echo $this->createWebUrl('massadd')}",
                    data: {
                    "num":num,
                    "count":count,
                    "money":money,
                    },
                    success: function(msg)
                    {
                    alert(msg);
                    }
                });
            });
        </script>
</form> 
</div>

<form id="redSet" class="form form-horizontal" action="{php echo $this->createWebUrl('addkouling')}" method="post">
 <div class="panel panel-default">
     <div class="panel-heading">
       增加随机口令
    </div>
     
       <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-2 control-label">增加口令数量：</label>
                    <div class="col-sm-6 col-md-2 col-xs-12">
                       <input id="rakouling" type="text" name="content" value="" class="form-control">
                    </div>
                    <label class="col-xs-12 col-sm-3 col-md-1 control-label">最小金额：</label>
                    <div class="col-sm-6 col-md-1 col-xs-12">
                       <input id="minmoney" type="text" name="minmoney" value="" class="form-control">
                    </div>
                     <label class="col-xs-12 col-sm-3 col-md-1 control-label">最大金额：</label>
                    <div class="col-sm-6 col-md-1 col-xs-12">
                       <input id="maxmoney" type="text" name="maxmoney" value="" class="form-control">
                    </div>
                    <div style="text-align: center;">
                     <label class="col-xs-12 col-sm-3 col-md-2 control-label">每个口令使用次数：</label>
                     </div>
                    <div class="col-sm-6 col-md-2 col-xs-12" >
                    
                       <input id="racount" type="text" name="count" value="" class="form-control">
                       </div >
                    

                </div>
                <div style="text-align: center;">
                   <span class="help-block">注：该金额单位为分，若为一元，请输入100</span>
                   </div>
        </div>

       <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-1 control-label"></label>
                     
                    <div class="col-md-2 col-lg-1" >
                        <input id="randkouling" type="button"  value="增加" class="btn btn-primary btn-block" />
                        <input type="hidden" name="token" value="{$_W['token']}" />
                    </div>
                </div>
        </div>
            <script type="text/javascript">
   
    
            $("#randkouling").click(function(){
               
                var num= $("#rakouling").val();
                var count = $("#racount").val();
                var maxmoney = $("#maxmoney").val();
                var minmoney = $("#minmoney").val();
                $.ajax({
                    type: "POST",
                    url: "{php echo $this->createWebUrl('randkouling')}",
                    data: {
                    "num":num,
                    "count":count,
                    "maxmoney":maxmoney,
                    "minmoney":minmoney
                    },
                    success: function(msg)
                    {
                    alert(msg);
                    }
                });
            });
        </script>
</form> 
</div>

<form id="redSet" class="form form-horizontal" action="{php echo $this->createWebUrl('addkouling')}" method="post">
 <div class="panel panel-default">
     <div class="panel-heading">
     自定义口令随机金额
    </div>
     
       <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-2 control-label">口令名称：</label>
                    <div class="col-sm-6 col-md-2 col-xs-12">
                       <input id="brakouling" type="text" name="content" value="" class="form-control">
                    </div>
                    <label class="col-xs-12 col-sm-3 col-md-1 control-label">最小金额：</label>
                    <div class="col-sm-6 col-md-1 col-xs-12">
                       <input id="bminmoney" type="text" name="minmoney" value="" class="form-control">
                    </div>
                     <label class="col-xs-12 col-sm-3 col-md-1 control-label">最大金额：</label>
                    <div class="col-sm-6 col-md-1 col-xs-12">
                       <input id="bmaxmoney" type="text" name="maxmoney" value="" class="form-control">
                    </div>
                    <div style="text-align: center;">
                     <label class="col-xs-12 col-sm-3 col-md-2 control-label">每个口令使用次数：</label>
                     </div>
                    <div class="col-sm-6 col-md-2 col-xs-12" >
                    
                       <input id="bracount" type="text" name="count" value="" class="form-control">
                       </div >
                    

                </div>
                <div style="text-align: center;">
                   <span class="help-block">注：该金额单位为分，若为一元，请输入100</span>
                   </div>
        </div>

       <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-1 control-label"></label>
                     
                    <div class="col-md-2 col-lg-1" >
                        <input id="brandkouling" type="button"  value="增加" class="btn btn-primary btn-block" />
                        <input type="hidden" name="token" value="{$_W['token']}" />
                    </div>
                </div>
        </div>
            <script type="text/javascript">
   
    
            $("#brandkouling").click(function(){
               
                var num= $("#brakouling").val();
                var count = $("#bracount").val();
                var maxmoney = $("#bmaxmoney").val();
                var minmoney = $("#bminmoney").val();
                $.ajax({
                    type: "POST",
                    url: "{php echo $this->createWebUrl('brandkouling')}",
                    data: {
                    "num":num,
                    "count":count,
                    "maxmoney":maxmoney,
                    "minmoney":minmoney
                    },
                    success: function(msg)
                    {
                    alert(msg);
                    }
                });
            });
        </script>
</form> 
</div>

<form id="redSet" class="form form-horizontal" action="{php echo $this->createWebUrl('addkouling')}" method="post">
 <div class="panel panel-default">
     <div class="panel-heading">
       增加口令(自定义口令)
    </div>
     
       <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-2 control-label">请输入口令内容：</label>
                    <div class="col-sm-6 col-md-2 col-xs-12">
                       <input id="kouling" type="text" name="content" value="" class="form-control">
                    </div>
                    <label class="col-xs-12 col-sm-3 col-md-1 control-label">金额：</label>
                    <div class="col-sm-6 col-md-2 col-xs-12">
                       <input id="money" type="text" name="money" value="" class="form-control">
                    </div>
                     <label class="col-xs-12 col-sm-3 col-md-2 control-label">使用次数：</label>
                    <div class="col-sm-6 col-md-2 col-xs-12">
                       <input id="count" type="text" name="count" value="" class="form-control">
                    </div>
                    
                </div>
                 <div style="text-align: center;">
                   <span class="help-block">注：该金额单位为分，若为一元，请输入100</span>
                   </div>
        </div>

       <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-1 control-label"></label>
                     
                    <div class="col-md-2 col-lg-1" >
                        <input id="add" type="button"  value="添加" class="btn btn-primary btn-block" />
                        <input type="hidden" name="token" value="{$_W['token']}" />
                    </div>
                </div>
        </div>
            <script type="text/javascript">
   
    
            $("#add").click(function(){
              
                var kouling= $("#kouling").val();
                var count = $("#count").val();
                var money = $("#money").val();
                $.ajax({
                    type: "POST",
                    url: "{php echo $this->createWebUrl('addkouling')}",
                    data: {
                    "content":kouling,
                    "count":count,
                    "money":money,
                    },
                    success: function(msg)
                    {
                    alert(msg);
                    }
                });
            });
        </script>

</form> 

</div>
<form id="redSet" class="form form-horizontal" action="{php echo $this->createWebUrl('addkouling')}" method="post">
 <div class="panel panel-default">
     <div class="panel-heading">
       修改口令
    </div>
     
       <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-2 control-label">要修改的口令：</label>
                    <div class="col-sm-6 col-md-2 col-xs-12">
                       <input id="upkouling" type="text" name="content" value="" class="form-control">
                    </div>
                    <label class="col-xs-12 col-sm-3 col-md-1 control-label">金额：</label>
                    <div class="col-sm-6 col-md-2 col-xs-12">
                       <input id="upmoney" type="text" name="money" value="" class="form-control">
                    </div>
                    <div style="text-align: center;">
                     <label class="col-xs-12 col-sm-3 col-md-2 control-label">使用次数：</label>
                     </div>
                    <div class="col-sm-6 col-md-2 col-xs-12" >
                    
                       <input id="upcount" type="text" name="count" value="" class="form-control">
                       </div >
                    

                </div>
                <div style="text-align: center;">
                   <span class="help-block">注：该金额单位为分，若为一元，请输入100</span>
                   </div>
        </div>

       <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-1 control-label"></label>
                     
                    <div class="col-md-2 col-lg-1" >
                        <input id="update" type="button"  value="修改" class="btn btn-primary btn-block" />
                        <input type="hidden" name="token" value="{$_W['token']}" />
                    </div>
                </div>
        </div>
            <script type="text/javascript">
   
    
            $("#update").click(function(){
               
                var kouling= $("#upkouling").val();
                var count = $("#upcount").val();
                var money = $("#upmoney").val();
                $.ajax({
                    type: "POST",
                    url: "{php echo $this->createWebUrl('updatekouling')}",
                    data: {
                    "content":kouling,
                    "count":count,
                    "money":money,
                    },
                    success: function(msg)
                    {
                    alert(msg);
                    }
                });
            });
        </script>
</form> 
</div>
<form id="redSet" class="form form-horizontal" action="{php echo $this->createWebUrl('addkouling')}" method="post">
 <div class="panel panel-default">
     <div class="panel-heading">
       删除口令
    </div>
     
       <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-2 control-label">要删除的口令：</label>
                    <div class="col-sm-6 col-md-2 col-xs-12">
                       <input id="dekouling" type="text" name="content" value="" class="form-control">
                    </div>
                   
                </div>
        </div>

       <div class="panel-body">
       <div class="form-group">
                    <label class="col-xs-12 col-sm-3 col-md-1 control-label"></label>
                     
                    <div class="col-md-2 col-lg-1" >
                        <input id="delete" type="button"  value="删除" class="btn btn-primary btn-block" />
                        <input type="hidden" name="token" value="{$_W['token']}" />
                    </div>
                </div>
        </div>
            <script type="text/javascript">
   
    
            $("#delete").click(function(){
              
                var kouling= $("#dekouling").val();
               
                $.ajax({
                    type: "POST",
                    url: "{php echo $this->createWebUrl('deletekouling')}",
                    data: {
                    "content":kouling
                    },
                    success: function(msg)
                    {
                    alert(msg);
                    }
                });
            });
        </script>

</form> 
</div>

    <script type="text/javascript">
        var data = <?php 
        echo json_encode($result);
        ?>;
//    for(var i=0;i<103;i++)
//    {
//        data[i] =  {id:i+1,name:"jason"+(i+1),gender:"男",age:i+1,address:"成都"};
//    }
var cs = new table({
        "tableId":"cs_table",    //必须 表格id
        "headers":["序号","口令","金额","剩余使用次数","创建日期"],   //必须 thead表头
        "data":data,         //必须 tbody 数据展示
        "displayNum": 20,    //必须   默认 10  每页显示行数
        "groupDataNum":5,     //可选    默认 10  组数
        "display_tfoot":true, // true/false  是否显示tfoot --- 默认false
        "bindContentTr":function(){ //可选 给tbody 每行绑定事件回调
            this.tableObj.find("tbody").on("click",'tr',function(e){
                return false;
                var tr_index = $(this).data("tr_index");        // tr行号  从0开始
                var data_index = $(this).data("data_index");   //数据行号  从0开始
            })
        },
        sort:true,    // 点击表头是否排序 true/false  --- 默认false
        sortContent:[
        {
                index:0,//表头序号
                compareCallBack:function(a,b){ //排序比较的回调函数
                    var a=parseInt(a.id,10);
                    var b=parseInt(b.id,10);
                    if(a < b)
                        return -1;
                    else if(a == b)
                        return 0;
                    else
                        return 1;
                }
            }
            // {
            //     index:3,//表头序号
            //     compareCallBack:function(a,b){ //排序比较的回调函数
            //         var a=parseInt(a.age,10);
            //         var b=parseInt(b.age,10);
            //         if(a < b)
            //             return -1;
            //         else if(a == b)
            //             return 0;
            //         else
            //             return 1;
            //     }
            // }
            ],
            specialRows:[
            {
                row:9,
                cssText:{
                    "color":"#FFCF17"
                }
            }
            ],
        search:true   // 默认为false 没有搜索
    });
</script>

{template 'common/footer'}